"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.setupTailwindGenerator = void 0;
const devkit_1 = require("@nx/devkit");
const versions_1 = require("../../utils/versions");
const add_tailwind_style_imports_1 = require("./lib/add-tailwind-style-imports");
const path_1 = require("path");
async function setupTailwindGenerator(tree, options) {
    let installTask = undefined;
    const project = (0, devkit_1.readProjectConfiguration)(tree, options.project);
    (0, devkit_1.generateFiles)(tree, (0, path_1.join)(__dirname, './files'), project.root, {});
    (0, add_tailwind_style_imports_1.addTailwindStyleImports)(tree, project, options);
    if (!options.skipPackageJson) {
        installTask = (0, devkit_1.addDependenciesToPackageJson)(tree, {}, {
            autoprefixer: versions_1.autoprefixerVersion,
            postcss: versions_1.postcssVersion,
            tailwindcss: versions_1.tailwindcssVersion,
        });
    }
    if (!options.skipFormat)
        await (0, devkit_1.formatFiles)(tree);
    return installTask;
}
exports.setupTailwindGenerator = setupTailwindGenerator;
exports.default = setupTailwindGenerator;
